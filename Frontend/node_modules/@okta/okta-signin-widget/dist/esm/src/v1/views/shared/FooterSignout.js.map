{"version":3,"file":"FooterSignout.js","sources":["../../../../../../src/v1/views/shared/FooterSignout.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { _, View, loc, internal } from 'okta';\nimport hbs from 'handlebars-inline-precompile';\nimport Enums from 'util/Enums';\nconst { Util } = internal.util;\nexport default View.extend({\n  template: hbs(\n    '\\\n      <a href=\"#\" class=\"link {{linkClassName}}\" data-se=\"signout-link\">\\\n        {{linkText}}\\\n      </a>\\\n    '\n  ),\n  className: 'auth-footer clearfix',\n  events: {\n    'click a[data-se=\"signout-link\"]': 'handleSignout',\n  },\n  handleSignout: function(e) {\n    e.preventDefault();\n\n    const appState = this.options.appState;\n    appState.trigger('signOut');\n    const isSMSPasswordRecovery = appState.get('isSMSPasswordRecovery');\n\n    this.model\n      .doTransaction(function(transaction) {\n        return transaction.cancel();\n      })\n      .then(() => {\n        if (this.settings.get('backToSignInUri') && !isSMSPasswordRecovery) {\n          Util.redirect(this.settings.get('backToSignInUri'));\n        } else {\n          this.state.set('navigateDir', Enums.DIRECTION_BACK);\n          appState.trigger('navigate', '');\n        }\n      });\n  },\n  getTemplateData: function() {\n    return {\n      linkClassName: _.isUndefined(this.options.linkClassName) ? 'goto' : this.options.linkClassName,\n      linkText: this.options.linkText || loc('goback', 'login'),\n    };\n  },\n});\n"],"names":["Util","internal","util","View","extend","template","className","events","handleSignout","e","preventDefault","appState","options","trigger","isSMSPasswordRecovery","get","model","doTransaction","transaction","cancel","then","settings","redirect","state","set","Enums","DIRECTION_BACK","getTemplateData","linkClassName","_","isUndefined","linkText","loc"],"mappings":"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"}