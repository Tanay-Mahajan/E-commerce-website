{"version":3,"file":"AutoRedirectView.js","sources":["../../../../../../src/v2/view-builder/views/AutoRedirectView.js"],"sourcesContent":["import { _, loc } from 'okta';\nimport { BaseForm, BaseView } from '../internals';\nimport { INTERSTITIAL_REDIRECT_VIEW } from '../../ion/RemediationConstants';\n\nconst Body = BaseForm.extend({\n  title() {\n    let titleString = loc('oie.success.text.signingIn', 'login');\n    // For more info on the API response available in appState, see IdxResponseBuilder.java\n    const app = this.options.appState.get('app');\n    const user = this.options.appState.get('user');\n\n    // If the option is not set, we treat that as being the case where we don't render the spinner.\n    // This is to account for the customer hosted scenario, because by default okta-core will pass in\n    // the correct value as set by the option in the Admin UI (which by default is \"DEFAULT\").\n    if (!this.redirectView || this.redirectView === INTERSTITIAL_REDIRECT_VIEW.NONE) {\n      titleString = loc('oie.success.text.signingIn.with.ellipsis', 'login');\n      return titleString;\n    }\n\n    if (_.isEmpty(app)) {\n      return titleString;\n    }\n\n    const { label: appInstanceName, name: appDisplayName } = app;\n    const { identifier: userEmail } = user || {};\n\n    const appName = appInstanceName ? appInstanceName : appDisplayName;\n\n    if (appName && userEmail && !this.settings.get('features.showIdentifier')) {\n      titleString = loc('oie.success.text.signingIn.with.appName.and.identifier', 'login', [appName, userEmail]);\n    } else if (appName) {\n      titleString = loc('oie.success.text.signingIn.with.appName', 'login', [appName]);\n    }\n\n    return titleString;\n  },\n  noButtonBar: true,\n  initialize() {\n    BaseForm.prototype.initialize.apply(this, arguments);\n    this.redirectView = this.settings.get('interstitialBeforeLoginRedirect');\n    this.model.set('useRedirect', true);\n    this.trigger('save', this.model);\n  },\n\n  render() {\n    BaseForm.prototype.render.apply(this, arguments);\n    if (this.redirectView === INTERSTITIAL_REDIRECT_VIEW.DEFAULT) {\n      this.add('<div class=\"okta-waiting-spinner\"></div>');\n    }\n  }\n});\n\nexport default BaseView.extend({\n  Body\n});\n"],"names":["Body","BaseForm","extend","title","titleString","loc","app","options","appState","get","user","redirectView","INTERSTITIAL_REDIRECT_VIEW","NONE","_","isEmpty","label","appInstanceName","name","appDisplayName","identifier","userEmail","appName","settings","noButtonBar","initialize","prototype","apply","arguments","model","set","trigger","render","DEFAULT","add","BaseView"],"mappings":"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"}